<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error {{ status | default('') }} - MediaDaw</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <style>
        :root {
            --mm-red: #DF0000;
            --mm-black: #191919;
            --mm-gray-bg: #F4F4F4;
        }

        body {
            background-color: var(--mm-gray-bg);
            font-family: 'Arial', sans-serif;
        }

        .bg-brand-red {
            background-color: var(--mm-red) !important;
        }

        .error-container {
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .error-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 3rem;
            max-width: 600px;
        }

        .error-icon {
            font-size: 5rem;
        }

        .error-title {
            color: var(--mm-black);
            font-weight: bold;
            margin-top: 1rem;
        }

        .error-code {
            background-color: var(--mm-gray-bg);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: var(--mm-red);
            font-weight: bold;
        }

        .btn-brand {
            background-color: var(--mm-red);
            color: white;
            font-weight: bold;
            border: none;
            padding: 0.75rem 2rem;
        }

        .btn-brand:hover {
            background-color: #b30000;
            color: white;
        }
    </style>
</head>
<body>

<header class="bg-brand-red py-3 shadow-sm">
    <div class="container">
        <a href="/" class="d-flex align-items-center text-decoration-none">
            <img src="/images/logo.png" alt="MediaDaw Logo" style="max-height: 50px;" onerror="this.style.display='none'">
        </a>
    </div>
</header>

<div class="error-container">
    <div class="error-card text-center">
        {# Iconos según el tipo de error #}
        {% if status == 404 %}
            <i class="bi bi-search error-icon text-warning"></i>
        {% elseif status == 403 %}
            <i class="bi bi-shield-lock-fill error-icon text-danger"></i>
        {% elseif status == 500 %}
            <i class="bi bi-exclamation-triangle-fill error-icon text-danger"></i>
        {% else %}
            <i class="bi bi-x-circle-fill error-icon text-danger"></i>
        {% endif %}

        {# Código de error #}
        {% if status %}
        <div class="mt-4 mb-3">
            <span class="error-code">{{ status }}</span>
        </div>
        {% endif %}

        {# Título personalizado según el error #}
        <h1 class="error-title h2">
            {% if status == 404 %}
                Página no encontrada
            {% elseif status == 403 %}
                Acceso denegado
            {% elseif status == 500 %}
                Error interno del servidor
            {% else %}
                {{ error | default('¡Ups! Algo salió mal') }}
            {% endif %}
        </h1>

        {# Mensaje descriptivo #}
        <p class="lead mt-3 mb-4 text-muted">
            {% if status == 404 %}
                Lo sentimos, la página que buscas no existe o ha sido movida.
            {% elseif status == 403 %}
                No tienes permisos para acceder a este recurso.
            {% elseif status == 500 %}
                Algo salió mal en nuestro servidor. Estamos trabajando para solucionarlo.
            {% else %}
                {{ message | default('Ha ocurrido un error inesperado. Por favor, inténtalo de nuevo más tarde.') }}
            {% endif %}
        </p>

        {# Información de la ruta (solo si existe) #}
        {% if path %}
        <div class="mb-4">
            <small class="text-muted">
                <i class="bi bi-link-45deg"></i> <strong>Ruta:</strong> <code>{{ path }}</code>
            </small>
        </div>
        {% endif %}

        {# Detalles técnicos (solo en desarrollo, si hay trace) #}
        {% if trace %}
        <details class="text-start mb-4">
            <summary class="text-muted" style="cursor: pointer;">
                <i class="bi bi-code-slash"></i> Detalles técnicos (desarrollo)
            </summary>
            <pre class="mt-2 p-3 bg-light border rounded text-danger small" style="max-height: 200px; overflow-y: auto;">{{ trace }}</pre>
        </details>
        {% endif %}

        {# Botones de acción #}
        <div class="d-flex gap-3 justify-content-center mt-4">
            <a href="javascript:history.back()" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Volver
            </a>
            <a href="/" class="btn btn-brand">
                <i class="bi bi-house-fill"></i> Ir al Inicio
            </a>
        </div>

        {# Enlaces de ayuda #}
        <div class="mt-4 pt-4 border-top">
            <p class="small text-muted mb-2">¿Necesitas ayuda?</p>
            <div class="d-flex justify-content-center gap-3 small">
                <a href="/contacto" class="text-decoration-none">
                    <i class="bi bi-envelope"></i> Contacto
                </a>
                <span class="text-muted">|</span>
                <a href="/ayuda" class="text-decoration-none">
                    <i class="bi bi-question-circle"></i> Centro de ayuda
                </a>
            </div>
        </div>
    </div>
</div>

<footer class="bg-dark text-white py-4 mt-5">
    <div class="container text-center">
        <p class="mb-0">&copy; 2026 MediaDaw - Tu tienda de electrónica</p>
        {% if timestamp is not null %}
        <p class="small text-muted mb-0">{{ timestamp | date('dd/MM/yyyy HH:mm:ss') }}</p>
        {% endif %}
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
